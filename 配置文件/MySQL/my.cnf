# For advice on how to change settings please see
# http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html
# *** DO NOT EDIT THIS FILE. It's a template which will be copied to the
# *** default location during install, and will be replaced if you
# *** upgrade to a newer version of MySQL.
[client]
#default-character-set=utf8
#loose-default-character-set=utf8
#避免MySQL的外部锁定，减少出错几率增强稳定性。
#socket=/var/lib/mysql/mysql.sock
socket=/var/run/mysqld/mysqld.sock

[mysql]
local-infile=1
loose-local-infile=1

#[mysqld_safe]
#pid-file	= /var/run/mysqld/mysqld.pid
#socket		= /var/run/mysqld/mysqld.sock
#nice		= 0

[mysqld]

datadir = /var/lib/mysql
pid-file=/var/run/mysqld/mysqld.pid
port = 3017
server_id = 1

socket=/var/run/mysqld/mysqld.sock
#character_set_server=utf8
#init_connect='SET NAMES utf8'
#skip-grant-tables

#每次重启MySQL之后EVENT自动启动
#event_scheduler=1

#主从复制相关变量
#gtid-mode = on #打开基于gitd复制的功能
#enforce-gtid-consistency = on
#skip_slave_start = 1 #数据库起来后不能直接开启复制
#log-slave-updates = ON
#plugin-load=semisync_master.so
#rpl_semi_sync_master_enabled=1   #打开半同步复制 
#rpl_semi_sync_master_timeout=10000   #此单位是毫秒

lower_case_table_names=1
#避免MySQL的外部锁定，减少出错几率增强稳定性。
#socket=/var/lib/mysql/mysql.sock
skip-external-locking
skip-name-resolve
skip-show-database

innodb_buffer_pool_size=256M #InnoDB引擎缓冲区
query_cache_size=16M #查询缓存
tmp_table_size=64M #临时表大小
key_buffer_size=32M
max_allowed_packet = 64M
max-connections=1800
max_user_connections=0 #不限制单用户的最大连接数，其最大连接值可以等于max_connections值

###########Log Setting#############
log_bin= /var/log/mysql/master-bin.log
binlog_format = ROW
binlog_row_image=minimal
max_binlog_size = 150M
log_error=/var/log/mysql/error.log
long_query_time=0.1 #100毫秒
#是否记录为使用索引的SQL
log_queries_not_using_indexes = ON
slow_query_log=ON
slow_query_log_file=/var/log/mysql/slowquery.log
general_log=ON
general_log_file=/var/log/mysql/general.log
expire_logs_days = 10
#binlog-do-db=db1
#binlog-do-db=db3
binlog-ignore-db=mysql

innodb_flush_log_at_trx_commit = 2

# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0

sql_mode=STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_AUTO_VALUE_ON_ZERO,NO_ENGINE_SUBSTITUTION,NO_ZERO_IN_DATE